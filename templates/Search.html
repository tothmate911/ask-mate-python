{% extends 'layout.html' %}

{% block content %}
    {% if type == 'search' %}
        <h3 class="search">Search with: {{ search_word }}</h3>
    {% else %}
        <h3 class="search">Search with: {{ tag['name'] }} tag</h3>
    {% endif %}
        <a href="{{ url_for('route_lists') }}" id="back_button"><button>Back</button></a>
    {% for quest in question %}
        <div id="question_listed">
        <table class="question">
        <tr>
            <td class="question-statistics">
                <p class="user"><a href="{{ url_for('user_page', user_name=quest['username']) }}">{{ quest['username'] }}</a></p>
                <p class="reputation">({{ quest['reputation'] }} point)</p>
            </td>
            <td>
                <a class="question-title" href="{{ url_for('view_up', question_id=quest['id']) }}">{{ quest['title'] | safe }}</a>
            </td>
        </tr>
        <tr class="question_line">
            <td class="question-statistics">
                <p>votes:</p>
                <p class="show-big">{{ quest['vote_number'] }}</p>
                <p>views:</p>
                <p class="show-big" >{{ quest['view_number'] }}</p>
            </td>
            <td class="question-content">
                <p class="question-message">{{ quest['message'] | safe }}</p>
                <ul class="tags">
                    {% for tag in tags %}
                        {% if tag['question_id'] == quest['id'] %}
                            <li><a href="{{ url_for('search_with_tag', tag_id=tag['id']) }}"><ins>{{ tag['name'] | safe }}</ins></a></li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </td>
            <td class="question-image">
                <div id="question-list-image">
                    {% if quest['image'] is not none %}
                        <img src="{{ quest['image'] }}" alt="image" height="300" width="260">
                    {% endif %}
                </div>
            </td>
        </tr>
        <tr class="question_down_line">
            <td>
                <div id="question-submission-data-box">
                    <div id="question-submission-data">{{ quest['submission_time'] }}</div>
                </div>
            </td>
        </tr>
        </table>
        </div>
        {% if type == 'search' %}
            {% for comment in answer %}
                {% if quest['id'] == comment['question_id'] %}
                    <div id="answer_listed">
                    <table class="question">
                    <tr>
                        <td class="question-statistics">
                            <p class="user"><a href="{{ url_for('user_page', user_name=comment['username']) }}">{{ comment['username'] }}</a></p>
                            <p class="reputation">({{ quest['reputation'] }} point)</p>
                        </td>
                    </tr>
                    <tr class="question_line">
                        <td class="question-statistics">
                            <p>votes:</p>
                            <p class="show-big">{{ comment['vote_number'] }}</p>
                        </td>
                        <td class="question-content">
                            <p class="question-message">{{ comment['message'] | safe }}</p>
                        </td>
                        <td class="question-image">
                            <div id="question-list-image">
                                {% if comment['image'] is not none %}
                                    <img src="{{ comment['image'] }}" alt="image" height="300" width="260">
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    <tr class="question_down_line">
                        <td>
                            <div id="question-submission-data-box">
                                <div id="question-submission-data">{{ comment['submission_time'] }}</div>
                            </div>
                        </td>
                    </tr>
                    </table>
                    </div>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endfor %}
{% endblock %}